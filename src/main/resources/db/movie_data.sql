-- 插入10部电影数据
INSERT INTO movie
  (title, director, actors, duration, release_date, poster_url, description, avg_rating)
VALUES
  ('流浪地球2', '郭帆', '吴京,刘德华,李雪健', 173, '2023-01-22', 'https://example.com/movie1.jpg', '太阳即将毁灭，人类在地球表面建造出巨大的推进器，寻找新家园。然而宇宙之路危机四伏，为了拯救地球，流浪地球时代的年轻人再次挺身而出，展开争分夺秒的生死之战。', 4.8),

  ('满江红', '张艺谋', '沈腾,易烊千玺,张译', 159, '2023-01-22', 'https://example.com/movie2.jpg', '南宋绍兴年间，岳飞死后四年，秦桧率兵与金国会谈。会谈前夜，金国使者死在宰相驻地，所携密信也不翼而飞。一个小兵与亲兵营副统领机缘巧合被裹挟进这巨大阴谋之中。', 4.7),

  ('独行月球', '张吃鱼', '沈腾,马丽,常远', 122, '2022-07-29', 'https://example.com/movie3.jpg', '人类为抵御小行星的撞击，拯救地球，在月球部署了月盾计划。陨石提前来袭，全员紧急撤离时，维修工独孤月因为意外，错过了领队马蓝星的撤离通知，一个人落在了月球。', 4.5),

  ('长津湖', '陈凯歌,徐克,林超贤', '吴京,易烊千玺,朱亚文', 176, '2021-09-30', 'https://example.com/movie4.jpg', '1950年，中国志愿军部队与美军在朝鲜长津湖地区展开了一场惊心动魄的战役。在零下40度的极寒天气下，志愿军战士们用血肉之躯谱写了一曲英雄赞歌。', 4.9),

  ('你好，李焕英', '贾玲', '贾玲,张小斐,沈腾', 128, '2021-02-12', 'https://example.com/movie5.jpg', '2001年的某一天，刚刚考上大学的贾晓玲经历了人生中的一次大起大落。一心想要成为母亲骄傲的她却因母亲突遭严重意外而悲痛万分。在贾晓玲情绪崩溃的状态下，竟意外的回到了1981年，并与年轻的母亲李焕英相遇。', 4.6),

  ('哪吒之魔童降世', '饺子', '吕艳婷,瀚墨,囧森瑟夫', 110, '2019-07-26', 'https://example.com/movie6.jpg', '天地灵气孕育出一颗能量巨大的混元珠，元始天尊将混元珠提炼成灵珠和魔丸，灵珠投胎为人，助周伐纣时可堪大用；而魔丸则会诞出魔王，为祸人间。元始天尊启动了天劫咒语，3年后天雷将会降临，摧毁魔丸。', 4.8),

  ('我不是药神', '文牧野', '徐峥,周一围,王传君', 117, '2018-07-05', 'https://example.com/movie7.jpg', '印度神油店老板程勇日子过得窝囊，店里没生意，老父病危，手术费筹不齐。前妻跟有钱人怀上了孩子，还要把他儿子的抚养权给拿走。一日，店里来了一个白血病患者，求他从印度带回一批仿制的特效药，好让买不起天价正版药的患者保住一线生机。', 4.9),

  ('红海行动', '林超贤', '张译,黄景瑜,海清', 138, '2018-02-16', 'https://example.com/movie8.jpg', '索马里海域外，中国商船遭遇劫持，船员全数沦为阶下囚。蛟龙突击队沉着应对，潜入商船进行突袭，成功解救全部人质。返航途中，非洲北部伊维亚共和国发生政变，恐怖组织连同叛军攻入首都，当地华侨面临危险。', 4.7),

  ('战狼2', '吴京', '吴京,弗兰克·格里罗,吴刚', 123, '2017-07-27', 'https://example.com/movie9.jpg', '冷锋突然被卷入了一场非洲国家的叛乱，本可以安全撤离，却因无法忘记曾经为军人的使命，孤身犯险冲回沦陷区，带领身陷屠杀中的同胞和难民，展开生死逃亡。', 4.8),

  ('美人鱼', '周星驰', '邓超,林允,张雨绮', 93, '2016-02-08', 'https://example.com/movie10.jpg', '富豪刘轩的地产计划涉及填海工程，威胁靠海为生的居民。因为人类对大海及生态的破坏，美人鱼只能被赶到一艘破船里艰难生存，背负家族秘密的珊珊被派遣前往阻止填海计划。', 4.5);

-- 新增影院表
CREATE TABLE
IF NOT EXISTS cinema
(
    cinema_id INT PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR
(100) NOT NULL,
    address VARCHAR
(255),
    phone VARCHAR
(20),
    description TEXT
);

-- 插入一条影院数据，ID为1
INSERT IGNORE
INTO cinema
(cinema_id, name, address, phone, description) VALUES
(1, '默认影院', '默认地址', '000-00000000', '系统初始化影院');

-- 修改hall表，增加cinema_id字段，所有影厅默认绑定cinema_id=1
ALTER TABLE hall ADD COLUMN cinema_id INT NOT NULL DEFAULT 1;
ALTER TABLE hall ADD CONSTRAINT fk_hall_cinema FOREIGN KEY (cinema_id) REFERENCES cinema(cinema_id) ON DELETE CASCADE; 